# Лабораторная работа № 3 — Полный жизненный цикл ML-проекта с инфраструктурой  

##  Описание
Данная лабораторная работа завершена: реализована сквозная инфраструктура ML-пайплайна — от управления данными до автоматизированной доставки (CI/CD) и развёртывания через Ansible.

##  Что выполнено
- Создана расширенная структура проекта с необходимыми компонентами.
- Подключён DVC для версионирования данных и моделей (`.dvc`, `dvc.yaml`, `dvc.lock`, `.dvcignore`).
- Добавлена и настроена инфраструктура через Ansible (`ansible/`) для автоматизации деплоя.
- Инкапсулирована инфраструктура контейнеризации с помощью `Dockerfile` и `docker-compose.yml` в каталоге `infra/compose/`.
- Реализовано основное приложение (`app/`) и веб-слой/API (`web/`) для взаимодействия с моделью.
- Исходники обработки, обучения и вызова модели находятся в `src/`; добавлены тесты в `tests/`.
- Установлены конфигурационные файлы (`config.ini`), зависимости (`requirements.txt`, `requirements-serve.txt`, `pyproject.toml`) и настройка тестов (`pytest.ini`).
- Настроен CI/CD через GitHub Actions (`.github/workflows/`).

##  Структура проекта

| Папка / файл                     | Описание                                                                 |
|----------------------------------|--------------------------------------------------------------------------|
| `ansible/`                       | Автоматизация деплоя (playbooks, конфигурации)                          |
| `app/`                           | Основное приложение (API или backend)                                   |
| `infra/compose/`                | Инфраструктурные файлы Docker Compose                                   |
| `data/`                         | Исходные и промежуточные данные (управление через DVC)                 |
| `model/`                        | Обученные и сохранённые модели                                           |
| `src/`                          | Код обработки данных и обучения моделей                                 |
| `tests/`                        | Тесты (unit/integration)                                                |
| `web/`                          | Веб-интерфейс/API (e.g., Flask/FastAPI)                                 |
| `.dvc`, `dvc.yaml`, `dvc.lock`  | Конфигурации DVC, пайплайн данных/моделей                              |
| `.dvcignore`, `.gitignore`       | Исключения файлов для DVC и Git                                         |
| `Dockerfile`                     | Сборка образов контейнеров                                              |
| `docker-compose.yml`             | Определение сервисов и сетей Docker Compose                             |
| `.github/workflows/`             | CI/CD пайплайны для автоматизации сборки, тестирования и деплоя        |
| `config.ini`                     | Параметры и гиперпараметры проекта                                      |
| `requirements*.txt`, `pyproject.toml` | Управление зависимостями и окружением                           |
| `pytest.ini`                     | Конфигурация pytest                                                     |

### Клонирование репозитория и установка зависимостей

```bash
git clone https://github.com/Mitlyy/DB_tech_lab_3.git
cd DB_tech_lab_3
pip install -r requirements.txt
```
### Использование
```
dvc repro
docker-compose up
curl -X POST "http://localhost:8000/predict" \
     -H "Content-Type: application/json" \
     -d '{"feature1": 0.7, "feature2": 1.3}'
ansible-playbook -i inventories/prod deploy.yml
```
